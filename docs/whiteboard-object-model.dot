// $Id$

// This is an attempt to capture
// http://subvert-rpki.hactrn.net/docs/prague-whiteboard-2007-03-22-23:15:01.jpg

// {arrowhead,arrowtail} shapes to use for database object relationships:
//   1-  none
//   m-  crow

digraph gsstsig_systems {
	rotate=90;	size="11,8.5";	splines=true;	ratio=fill;

	// Black denotes stuff visible in left-to-right protocol
	node [ color=black ];

	issuer;		// Red insert "RPP" (RPKI publication point?  Huh?)
	parent;		// Red insert "URL" and an icon that I think means "key"
	repo;		// Red insert "URL" and an icon that I think means "key"
	ca;		// Red insert "CRL #", "cert #"
	child;
	biz_sign;

	// Green denotes stuff created on the fly by the RPKI engine
	node [ color=green ];

	child_cert;	// Red footnote "unique caid, cert serial" -- not part of picture?
	ca_key_pair;
	ee_certs;
	roa;
	latest_ca_cert;
	latest_crl;

	// One->many mappings
	edge [ color=black, arrowtail=none, arrowhead=crow ];

	child -> biz_sign;
	issuer -> ca;
	issuer -> child;
	issuer -> parent;
	parent -> ca;
	repo -> biz_sign;
	repo -> parent;

	// Many->many mappings
	edge [ color=black, arrowtail=crow, arrowhead=crow ];

	ca -> child;

	// One->many mappings
	edge [ color=green, arrowtail=none, arrowhead=crow ];

	ca -> ca_key_pair;
	child -> child_cert;

	// One->one mappings
	edge [ color=green, arrowtail=none, arrowhead=none ];

	ca_key_pair -> latest_ca_cert;
	ca_key_pair -> latest_crl;
	ee_certs -> roa;

	// One->many mappings that have something weird about them
	edge [ color=green, arrowtail=none, arrowhead=crow, style=dashed ];

	ca_key_pair -> child_cert;
	ca_key_pair -> ee_certs;
}

// Local Variables:
// compile-command: "dot -Tps2 whiteboard-object-model.dot | ps2pdf - whiteboard-object-model.pdf"
// End:

// $Id$
//
// First cut at a lame picture showing how all the tools fit together.
//
// Client -> server
// Blue = read-only
// Red  = read-write
// Diamond = program
// Oval = disk

digraph big_picture {
	rotate=90;	size="11,8.5";	splines=true;	ratio=fill;

	node			[shape = diamond];

	rpkid -> irdbd		[color = blue];
	rpkid -> pubd		[color = red];
	myrpki -> rpkid		[color = red];
	myrpki -> pubd		[color = red];
	gui -> myrpki		[color = red];
//	myrpki -> mysqld	[color = red];
//	rpkid -> mysqld		[color = red];
//	irdbd -> mysqld		[color = blue];
//	pubd -> mysqld		[color = red];
	rpkid -> rootd		[color = red];
	pubd -> repository	[color = red, arrowhead = none];
	rsyncd -> repository	[color = blue, arrowhead = none];
	rcynic -> rsyncd	[color = blue];
	cache -> rcynic		[color = blue, arrowhead = none];
	rpki_rtr -> cache	[color = blue];
	roa_to_irr -> cache	[color = blue];

	repository		[shape = oval];
	cache			[shape = oval];

	subgraph cluster_irbe {
		label = "IR Back End";
		irdbd;
		myrpki;
		gui;
	}

	subgraph cluster_generation {
		label = "Generation";
		rpkid;
		rootd;
	}

	subgraph cluster_publication {
		label = "Publication";
		pubd;
		repository;
		rsyncd;
	}

	subgraph cluster_validator {
		label = "Validator";
		rcynic;
		cache;
	}
}

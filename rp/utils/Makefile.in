# $Id$

CFLAGS		= @CFLAGS@
LDFLAGS		= @LDFLAGS@
LIBS		= @LIBS@

INSTALL		= @INSTALL@ -m 555 

prefix		= @prefix@
exec_prefix	= @exec_prefix@
datarootdir	= @datarootdir@
datadir		= @datadir@
localstatedir	= @localstatedir@
sharedstatedir	= @sharedstatedir@
sysconfdir	= @sysconfdir@
bindir		= @bindir@
sbindir		= @sbindir@
libexecdir	= @libexecdir@
libdir		= @libdir@

abs_top_srcdir	 = @abs_top_srcdir@
abs_top_builddir = @abs_top_builddir@

BINS		= find_roa hashdir print_rpki_manifest print_roa scan_roas uri

SCRIPTS		= scan_routercerts

all: ${BINS}

clean:
	rm -rf ${BINS} *.o *.dSYM

test:
	@true

install: all
	if test -d ${DESTDIR}${bindir} ; then :; else ${INSTALL} -d ${DESTDIR}${bindir}; fi
	${INSTALL} ${BINS} ${SCRIPTS} ${DESTDIR}${bindir}

deinstall uninstall:
	for i in ${BINS} ${SCRIPTS}; do rm -f ${DESTDIR}${bindir}/$$i; done

distclean: clean
	rm -f Makefile

find_roa: find_roa.c
	${CC} ${CFLAGS} -o $@ find_roa.c ${LDFLAGS} ${LIBS}

hashdir: hashdir.c
	${CC} ${CFLAGS} -o $@ hashdir.c ${LDFLAGS} ${LIBS}

print_roa: print_roa.c
	${CC} ${CFLAGS} -o $@ print_roa.c ${LDFLAGS} ${LIBS}

print_rpki_manifest: print_rpki_manifest.c
	${CC} ${CFLAGS} -o $@ print_rpki_manifest.c ${LDFLAGS} ${LIBS}

scan_roas: scan_roas.c
	${CC} ${CFLAGS} -o $@ scan_roas.c ${LDFLAGS} ${LIBS}

uri: uri.c
	${CC} ${CFLAGS} -o $@ uri.c ${LDFLAGS} ${LIBS}

# $Id$

NAME = hashdir

BIN = ${NAME}
SRC = ${NAME}.c
OBJ = ${NAME}.o

CFLAGS = @CFLAGS@
LDFLAGS = @LDFLAGS@
LIBS = @LIBS@

all: ${BIN}

clean::
	rm -f ${BIN} ${OBJ}

${BIN}: ${SRC}
	${CC} ${CFLAGS} -o $@ ${SRC} ${LDFLAGS} -lcrypto ${LIBS}

INPUT  = @top_srcdir@/rcynic/rcynic-data/authenticated
OUTPUT = hashed-pem-dir

test: ${BIN}
	if test -d ${INPUT}; then rm -rf ${OUTPUT} && mkdir ${OUTPUT} && ./hashdir ${INPUT} ${OUTPUT}; else :; fi

clean::
	rm -rf ${OUTPUT}

install:
	@true

distclean: clean
	rm -f Makefile
